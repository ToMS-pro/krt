<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Jadwal KA Parcel</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    select, table { margin-top: 10px; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    table { border-collapse: collapse; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Pilih KA</h2>
  <select id="keretaSelect">
    <option value="">-- Pilih Kereta --</option>
  </select>

  <h3 id="judulKereta"></h3>
  <table id="tabelRute" style="display: none;">
    <thead>
      <tr>
        <th>Stasiun</th>
        <th>Datang</th>
        <th>Berangkat</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    fetch('data.json')
      .then(res => res.json())
      .then(dataKereta => {
        const select = document.getElementById('keretaSelect');
        const judul = document.getElementById('judulKereta');
        const table = document.getElementById('tabelRute');
        const tbody = table.querySelector('tbody');

        // Isi dropdown
        dataKereta.forEach((ka, i) => {
          const opt = document.createElement('option');
          opt.value = i;
          opt.textContent = `${ka.nama} (${ka.asal} → ${ka.tujuan})`;
          select.appendChild(opt);
        });

        // Tampilkan rute saat dipilih
        select.addEventListener('change', function () {
          const index = this.value;
          tbody.innerHTML = '';

          if (index === "") {
            judul.textContent = "";
            table.style.display = 'none';
            return;
          }

          const ka = dataKereta[index];
          judul.textContent = `${ka.nama} (${ka.asal} → ${ka.tujuan}) - ${ka.jam}`;
          ka.rute.forEach(r => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${r.stasiun}</td><td>${r.dat}</td><td>${r.ber}</td>`;
            tbody.appendChild(tr);
          });

          table.style.display = 'table';
        });
      })
      .catch(err => {
        alert("Gagal memuat data.json: " + err.message);
        console.error(err);
      });
  </script>
</body>
</html>
